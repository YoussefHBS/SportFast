<div class="container mt-4" role="main" aria-label="Carrito de compras">
  <h2 tabindex="0">Carrito de Compras</h2>

  <div class="modal fade show" tabindex="-1" style="display: block; background: rgba(0,0,0,0.5);" *ngIf="mostrarModalError">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Error en el pago</h5>
          <button type="button" class="btn-close" (click)="cerrarModalError()"></button>
        </div>
        <div class="modal-body">
          <p>{{ mensajeError }}</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="cerrarModalError()">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="productos.length === 0">
    <p>Tu carrito está vacío.</p>
  </div>

  <table *ngIf="productos.length > 0" class="table table-striped" aria-label="Tabla de productos en el carrito">
    <thead>
      <tr>
        <th scope="col">Producto</th>
        <th scope="col">Precio unitario</th>
        <th scope="col">Cantidad</th>
        <th scope="col">Total</th>
        <th scope="col">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let producto of productos; let i = index">
        <td>{{ producto.nombre }}</td>
        <td>{{ producto.precio_unitario }}€</td>
        <td>{{ producto.cantidad }}</td>
        <td>{{ producto.total }}€</td>
        <td>
          <button class="btn btn-danger btn-sm" (click)="eliminar(i)" aria-label="Eliminar del carrito">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="productos.length > 0" class="mt-3">
    <h4>Total: {{ total.toFixed(2) }}€</h4>
    <button class="btn btn-success" (click)="pagar()" aria-label="Pagar carrito">Pagar</button>
  </div>
</div>
